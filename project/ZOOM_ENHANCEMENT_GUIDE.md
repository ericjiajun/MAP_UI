# 缩放功能增强说明

## 问题描述
之前的缩放功能限制过于严格，创建小尺寸多边形（如10m×8m的室内建筑）后只能放大约10倍，无法看清精确细节。

## 解决方案
已大幅提升缩放范围，现在支持从超广视角到毫米级精度的缩放。

---

## 新的缩放范围

### 经纬度模式（Geographic）
```
原限制：MIN = 1,000   MAX = 1,000,000  (10倍范围)
新限制：MIN = 10       MAX = 100,000,000 (10,000,000倍范围)
```

**实际效果**：
- **最小缩放** (scale=10)：可以看到整个地球
- **中等缩放** (scale=100,000)：适合城市级别查看（默认值）
- **高精度** (scale=10,000,000)：可以精确到厘米级
- **超高精度** (scale=100,000,000)：可以精确到毫米级

### WebMercator模式
```
原限制：MIN = 0.0001  MAX = 50 (500,000倍范围)
新限制：MIN = 0.00001 MAX = 10,000 (1,000,000,000倍范围)
```

**实际效果**：
- **最小缩放** (scale=0.00001)：1像素=100公里
- **中等缩放** (scale=1)：1像素=1米
- **高精度** (scale=1000)：1000像素=1米（毫米级）
- **超高精度** (scale=10,000)：10000像素=1米（0.1毫米级）

---

## 使用方法

### 方法1：鼠标滚轮（推荐）
```
向上滚动 = 放大 (×1.1)
向下滚动 = 缩小 (×0.9)
```
- 连续滚动可快速缩放
- 每次滚动增量较小，便于精确控制

### 方法2：键盘快捷键（新增）
```
+ 或 =    放大 (×1.5)    ← 快速放大
-         缩小 (×0.667)  ← 快速缩小
Ctrl+0    适应窗口       ← 自动调整到合适缩放
```

### 方法3：工具栏按钮（新增）
```
┌──────────────────────────────┐
│ 视图控制                     │
│ [重置] [适应] [🔍+] [🔍-]    │
│        [↺]  [↻]              │
└──────────────────────────────┘

🔍+ = 放大 (×1.5)
🔍- = 缩小 (×0.667)
```

---

## 典型应用场景

### 场景1：室内10m×8m建筑精确绘制

**初始状态**：创建多边形后
```
scale ≈ 100,000 (默认)
10米 ≈ 屏幕上几个像素
```

**放大查看细节**：
```
按 + 键 10次
或
鼠标滚轮向上滚动20次

scale ≈ 10,000,000
10米 ≈ 屏幕上1000像素
可以清楚看到每个角点
精度可达厘米级
```

### 场景2：小物体绘制（1m×1m）

**极限放大**：
```
持续按 + 或滚轮放大
scale 可达 100,000,000
1米 ≈ 屏幕上10000像素
精度可达毫米级

示例：
- 绘制房间内的桌子（1.5m×0.8m）
- 绘制门窗（0.9m宽）
- 绘制家具细节
```

### 场景3：大范围到局部切换

**工作流程**：
```
1. 初始：适应窗口（Ctrl+0）
   → 看到整个建筑群

2. 选中目标建筑
   → 按 + 放大5-10次
   → 或滚轮放大

3. 精确编辑细节
   → 继续放大到厘米级

4. 查看整体效果
   → Ctrl+0 适应窗口
   → 或按 - 缩小
```

---

## 缩放级别参考

### 城市规划级别
```
scale = 10 ~ 1,000
1度经度 ≈ 10-1000 像素
适合：国家/省份/城市整体规划
```

### 建筑群级别
```
scale = 10,000 ~ 100,000
100米 ≈ 100-1000 像素
适合：小区、园区整体布局
```

### 单体建筑级别（默认）
```
scale = 100,000 ~ 1,000,000
10米 ≈ 100-1000 像素
适合：单个建筑绘制和编辑
```

### 室内精确级别
```
scale = 1,000,000 ~ 10,000,000
1米 ≈ 100-1000 像素
适合：室内平面图、精确尺寸标注
```

### 超精确级别
```
scale = 10,000,000 ~ 100,000,000
0.1米 ≈ 100-1000 像素
适合：毫米级精度要求的场景
```

---

## 性能提示

### 正常使用范围
```
推荐范围：scale = 1,000 ~ 10,000,000
这个范围内性能最佳，渲染流畅
```

### 极限缩放注意事项

#### 极限缩小 (scale < 100)
```
优点：可以看到非常大的范围
缺点：
- 所有对象变得极小，难以选中
- 建议只用于总览，不适合编辑
```

#### 极限放大 (scale > 50,000,000)
```
优点：超高精度，毫米级别
缺点：
- 视野范围变得极小
- 鼠标移动对应的世界距离极小
- 建议只在需要超高精度时使用
```

---

## 快捷键总结

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `+` 或 `=` | 快速放大 | ×1.5 倍 |
| `-` | 快速缩小 | ×0.667 倍 |
| `Ctrl+0` | 适应窗口 | 自动调整最佳缩放 |
| 鼠标滚轮↑ | 平滑放大 | ×1.1 倍 |
| 鼠标滚轮↓ | 平滑缩小 | ×0.9 倍 |

---

## 技巧与建议

### 技巧1：快速定位
```
1. Ctrl+0 适应窗口（看到全局）
2. 点击目标区域（移动视图中心）
3. 连续按 + 放大（聚焦到目标）
```

### 技巧2：精确编辑
```
编辑小尺寸对象时：
1. 先放大到看清轮廓
2. 开始编辑节点
3. 如需更精确，继续放大
4. 编辑完成后 Ctrl+0 查看整体
```

### 技巧3：对比验证
```
绘制完成后：
1. 放大查看细节是否准确
2. 缩小查看整体比例是否协调
3. 来回切换确保无误
```

### 技巧4：键盘+鼠标组合
```
快速切换缩放级别：
- 键盘 + 或 - 快速大幅调整
- 鼠标滚轮微调到合适位置
```

---

## 常见问题

### Q: 为什么放大后节点看起来很大？
A: 节点的屏幕尺寸是固定的（4-8像素），放大时：
- 世界坐标距离变小
- 节点显示更大是正常的
- 这样更容易选中和编辑

### Q: 极限放大后移动很慢？
A: 这是正常的！
- scale 越大，每个像素对应的世界距离越小
- 例如 scale=10,000,000 时，移动1像素 ≈ 0.01毫米
- 如需快速移动，先缩小一些

### Q: 缩放后图形变形？
A: 不会变形！
- 缩放只改变显示比例
- 不改变实际坐标
- 所有尺寸和角度保持不变

### Q: 可以输入精确的缩放值吗？
A: 当前不支持直接输入，但可以：
1. 查看左下角的缩放值（"缩放: X.XX"）
2. 使用快捷键快速调整到目标范围
3. 未来可能添加缩放输入框

---

## 更新总结

✅ **放大范围**：从原来的10倍提升到**1000万倍**
✅ **精度支持**：支持从全球视角到**毫米级精度**
✅ **快捷键**：新增 `+`/`-` 快速缩放，`Ctrl+0` 适应窗口
✅ **工具栏按钮**：新增 🔍+ 和 🔍- 按钮
✅ **性能优化**：fitToWindow 现在也应用缩放限制

现在你可以自由地从城市级别一直放大到毫米级别，完美支持室内建筑的精确绘制！🎯
